def dis_2(p1, p2):
    (x1, y1) = p1
    (x2, y2) = p2
    return (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1)


def avg(arr):
    (sx, sy) = (0., 0.)
    for (x, y) in arr:
        sx += x
        sy += y
    return (sx/len(arr), sy/len(arr))


def reduce_point(points):
    if len(points) == 0:
        return []
    src = points[:]
    dst = []
    while len(src) > 0:
        a = src[0]
        src = src[1:][:]
        tbr = []
        for i in range(0, len(src)):
            if dis_2(a, src[i]) < 500:
                tbr.append(src[i])

        if len(tbr) > 0:
            dst.append(avg(tbr + [a]))
            for x in tbr:
                src.remove(x)
        else:
            dst.append(a)

    return dst


a = [(581.0, 494.5), (807.0, 494.5), (580.5, 495.0), (581.0, 495.0), (581.5, 495.0), (806.5, 495.0), (807.0, 495.0), (807.5, 495.0), (581.0, 495.5), (807.0, 495.5), (421.0, 496.0), (355.0, 678.5), (581.0, 678.5),
     (807.0, 678.5), (354.5, 679.0), (355.0, 679.0), (355.5, 679.0), (580.5, 679.0), (581.0, 679.0), (581.5, 679.0), (806.5, 679.0), (807.0, 679.0), (807.5, 679.0), (355.0, 679.5), (581.0, 679.5), (807.0, 679.5)]

b = [(355.0, 494.5), (581.0, 494.5), (807.0, 494.5), (354.5, 495.0), (355.0, 495.0), (355.5, 495.0), (580.5, 495.0), (581.0, 495.0), (581.5, 495.0), (806.5, 495.0), (807.0, 495.0), (807.5, 495.0), (355.0, 495.5), (581.0, 495.5), (807.0, 495.5),
     (355.0, 678.5), (581.0, 678.5), (807.0, 678.5), (354.5, 679.0), (355.0, 679.0), (355.5, 679.0), (580.5, 679.0), (581.0, 679.0), (581.5, 679.0), (806.5, 679.0), (807.0, 679.0), (807.5, 679.0), (355.0, 679.5), (581.0, 679.5), (807.0, 679.5)]

print(reduce_point(a))
print(reduce_point(b))
